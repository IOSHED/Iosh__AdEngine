# AdEngine

| –°–µ—Ä–≤–∏—Å     | –ü—É—Ç—å                                                             |
|------------|------------------------------------------------------------------|
| Swagger    | [127.0.0.1:8000/docs/](http://127.0.0.1:8000/docs/)              |                                   
| Tg bot     | [@ad_engine_from_prod_bot](https://t.me/ad_engine_from_prod_bot) |                                   
| Prometheus | [127.0.0.1:9090/](http://127.0.0.1:9090/)                        |                                   
| Grafana    | [127.0.0.1:3000/](http://127.0.0.1:3000/)                        |

## Launch

1) Clone —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
    ```powershell
    git clone https://gitlab.prodcontest.ru/2025-final-projects-back/IOSHED.git
    ```
   
2) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `docker-compose`

3) –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é solution
    ```powershell
    cd solution
    ```

4) –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä [`docker-compose –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞`](./deploy/docker-compose.prod.yaml):
    ```powershell
     docker-compose -f ./deploy/docker-compose.prod.yaml up -d
    ```

### –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

[–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä](./deploy/docker-compose.prod.yaml) —Å–æ–¥–µ—Ä–∂–∏—Ç:

| –°–µ—Ä–≤–∏—Å       | –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                 | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç           |
|--------------|------------------------------------------------|----------------------|
| grafana      | –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫                                | `prometheus`         |
| prometheus   | –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫                                | `ad_engine`          |
| postgres     | –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö                 |                      |
| redis        | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |                      |
| ad_engine    | `Http` —Å–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π API AdEngin      | `postgres`, `redis`  |
| telegram_bot | –¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π `ad_engine`         | `ad_engine`, `redis` |

–í—Å–µ `docker-compose` –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è, –¥–ª—è –±–æ–ª–µ–µ —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ –ø—Ä–∏–º–µ—Ä—É —Å—Ö–µ–º—ã:
```mermaid 
graph LR
  D["/deploy/docker-compose.dev.yaml"]
  P["/deploy/docker-compose.prod.yaml"]
  B["/deploy/docker-compose.base.yaml"]
  T["/testing/docker-compose.test.yaml"]
  PP["docker-compose.yaml"]

  B --> D
  B --> P
  B --> T
  P --> PP
```

## Technologies used

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                             | ‚Ññ1                                              | ‚Ññ2                                                   | ‚Ññ3                                       |
|----------------------------------------|-------------------------------------------------|------------------------------------------------------|------------------------------------------|
| Grafana                                | –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤                       | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∏ –∫—Ä–∞—Å–∏–≤—ã–π ui                            | –ë–æ–≥–∞—Ç–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π         |
| Prometheus                             | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–∏–±–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –¥–∞–Ω–Ω—ã–º            | –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–∞—à–∏–≤–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ | –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫                 |
| Postgres                               | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è `SQL` –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö                 | –ë–µ—Å–∫—Ä–∞–π–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞–≥–∏–Ω–æ–≤                      |                                          |
| Redis                                  | –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (—Å–∫–æ—Ä–æ—Å—Ç—å) | –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è                               | –°–∞–º–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–∞—è `in-memory` –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| Aiogram dialog + Python (telegram_bot) | –¢–∞–±–ª–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤             | –ì–∏–±–∫–∏–µ callback'–∏                                    | –°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–æ—Ç–∞                 |
| Actix + Rust (ad_engine)               | –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å                      | –ü—Ä–æ—Å—Ç–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                                 | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ `futures` –∏–∑ –¥—Ä—É–≥–∏—Ö `crates`   |
| Sqlx + Rust (ad_engine)                | –ß–∏—Å—Ç—ã–µ `SQL` –∑–∞–ø—Ä–æ—Å—ã                            | –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π                             | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ `futures` –∏–∑ –¥—Ä—É–≥–∏—Ö `crates`   |
| Yandex GPT                             | –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫                          | –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞                    | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –¥–µ—à–µ–≤–∏–∑–Ω–∞ —Ç–∞—Ä–∏—Ñ–æ–≤          |

## Main Endpoints

–£–ø–æ–º—è–Ω—É—Ç—ã –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –≥–ª–∞–≤–Ω—ã–µ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ `endpoint'—ã`.

### Campaigns

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π (PATCH `/advertisers/{advertiser_id}/campaigns/{campaign_id}/generate_text`):

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç yandex gpt, –æ—Ç—Å—ã–ª–∞—è –µ–π `http` –∑–∞–ø—Ä–æ—Å. –ï—Å–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ `503`. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π, –∏ –≤—ã–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–≤–∏–¥–µ –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ `campaign`.
–î–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Å–ª–µ–¥—É–µ—Ç —É–∫–∞–∑–∞—Ç—å:

- ad_text (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ —Ä–µ–∫–ª–∞–º—ã. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, —Ç–æ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –±–µ—Ä—É—Ç—Å—è –∏–∑ —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–π `campaign`.
- ad_title (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, —Ç–æ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –±–µ—Ä—É—Ç—Å—è –∏–∑ —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–π `campaign`.
- generate_type (ALL | TEXT | TITLE): —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è `campaign`.

Input json example:
  ```json
  {
    "ad_text": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ä–µ–∫–ª–∞–º—ã",
    "ad_title": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã",
    "generate_type": "ALL"
  }
  ```
 
Output json example:
  ```json
    {
    "ad_title": "Nt",
    "ad_text": "His omega must be Ad",
    "advertiser_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
    "campaign_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
    "clicks_limit": 105,
    "impressions_limit": 25,
    "cost_per_click": 150,
    "cost_per_impression": 100,
    "end_date": 5,
    "start_date": 3,
    "targeting": {}
  }
  ``` 

[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞](./media/–≥–µ–Ω–µ—Ä–∞—Ü–∏—è%20—Ç–µ–∫—Å—Ç–∞.gif)

<img src="./media/–≥–µ–Ω–µ—Ä–∞—Ü–∏—è%20—Ç–µ–∫—Å—Ç–∞.gif" width="512" height="256" alt="–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞"/>


–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—É—Ç—ë–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –≤ [`ad_engine`](/microservices/ad_engine/conf/base.yaml)

| –ù–∞—Å—Ç—Ä–æ–π–∫–∞                        | –¢–∏–ø               | –û–ø–∏—Å–∞–Ω–∏–µ                                                            |
|----------------------------------|-------------------|---------------------------------------------------------------------|
| temperature                      | float (–æ—Ç 0 –¥–æ 1) | –ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ `llm`                                          |
| max_tokens                       | integer (–æ—Ç 1)    | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –æ—Ç–≤–µ—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –≤ –≤–∏–¥–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤            |
| system_prompt_for_generate_title | string            | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏   |
| system_prompt_for_generate_body  | string            | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ |

### Images

| –ü—É—Ç—å                                                                      | –ú–µ—Ç–æ–¥  | –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                                                              |
|---------------------------------------------------------------------------|--------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `/advertisers/{advertiser_id}/campaigns/{campaign_id}/images`             | GET    | –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–º—ë–Ω –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –≤ —Ä–µ–∫–ª–∞–º–Ω—É—é –∫–∞–º–ø–∞–Ω–∏—é                                                                                                                                                                                                                         |
| `/advertisers/{advertiser_id}/campaigns/{campaign_id}/images`             | POST   | –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (—Ö—Ä–∞–Ω—è –µ—ë –≤ `postgres`) –≤ —Ä–µ–∫–ª–∞–º–Ω—É—é –∫–∞–º–ø–∞–Ω–∏—é, –∏—Å–ø–æ–ª—å–∑—É—è  –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Content-Type: multipart/form-data`. –ú–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞–ø–∏—Å–∞–≤ –Ω–µ–±–æ–ª—å—à—É—é —Ñ–æ—Ä–º—É [—Ç—ã–∫.](./media/index.html) (—Ç–æ–ª—å–∫–æ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –≤ –∑–∞–ø—Ä–æ—Å–µ –ø–æ–º–µ–Ω—è—Ç—å uuid –¥–ª—è `advertiser` –∏ `campaign`) |
| `/advertisers/{advertiser_id}/campaigns/{campaign_id}/images/{file_name}` | DELETE | –£–¥–∞–ª—è–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏–∑ —Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ –ø–æ –∏–º–µ–Ω–∏                                                                                                                                                                                                                                             |
| `/advertisers/{advertiser_id}/campaigns/{campaign_id}/images/{file_name}` | GET    | –ü–æ–ª—É—á–∞–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é —Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ –ø–æ –∏–º–µ–Ω–∏                                                                                                                                                                                                                                               |

[–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π](./media/–∑–∞–≥—Ä—É–∑–∫–∞%20—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.gif)

<img src="./media/–∑–∞–≥—Ä—É–∑–∫–∞%20—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.gif" width="800" height="425" alt="–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π"/>


–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—É—Ç—ë–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –≤ [`ad_engine`](/microservices/ad_engine/conf/base.yaml)

| –ù–∞—Å—Ç—Ä–æ–π–∫–∞             | –¢–∏–ø            | –û–ø–∏—Å–∞–Ω–∏–µ                                                                    |
|-----------------------|----------------|-----------------------------------------------------------------------------|
| support_mime          | array string   | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ `mime` —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏.                  |
| max_size              | integer (–æ—Ç 0) | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–∏–ª–æ–±–∞–π—Ç–∞—Ö                       |
| max_image_on_campaign | integer (–æ—Ç 0) | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π, —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è –æ–¥–Ω–æ–π —Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ |
| limit_size_media      | integer (–æ—Ç 0) | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞ –≤ –∫–∏–ª–æ–±–∞–π—Ç–∞—Ö                       |

### Moderate

| –ü—É—Ç—å               | –ú–µ—Ç–æ–¥  | –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ                                         |
|--------------------|--------|----------------------------------------------------------|
| `/moderate/config` | POST   | –í–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞ –≤–æ –≤—Å–µ–º `ad_engine`  |
| `/moderate/list`   | POST   | –î–æ–±–∞–≤–ª—è–µ—Ç —Å–ª–æ–≤–∞ –≤ —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫                          |
| `/moderate/list`   | DELETE | –£–¥–∞–ª—è–µ—Ç —Å–ª–æ–≤–∞ –∏–∑ —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ (—è–≤–ª—è–µ—Ç—Å—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º) |
| `/moderate/list`   | GET    | –ü–æ–ª—É—á–∞–µ—Ç —Å–ª–æ–≤–∞ –∏–∑ —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞                         |

[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∑—É—Ä–æ–π](./media/–Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω—ã–µ%20—Å–ª–æ–≤–∞.gif)

<img src="./media/–Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω—ã–µ%20—Å–ª–æ–≤–∞.gif" width="512" height="256" alt="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∑—É—Ä–æ–π"/>

[–¶–µ–Ω–∑—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π](./media/—Ü–µ–Ω–∑—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ%20—É–∂–µ%20—Å–æ–∑–¥–∞–Ω–Ω—ã—Ö%20–∫–∞–º–ø–∞–Ω–∏–π.gif)

<img src="./media/—Ü–µ–Ω–∑—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ%20—É–∂–µ%20—Å–æ–∑–¥–∞–Ω–Ω—ã—Ö%20–∫–∞–º–ø–∞–Ω–∏–π.gif" width="512" height="256" alt="–¶–µ–Ω–∑—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π"/>


| –ù–∞—Å—Ç—Ä–æ–π–∫–∞   | –¢–∏–ø               | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                |
|-------------|-------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| sensitivity | float (–æ—Ç 0 –¥–æ 1) | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ —Å–ª–æ–≤–∞–º –∏ —Å–ª–æ–≤–æ—Ñ–æ—Ä–º–∞–º –∏–∑ —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ (0 ‚Äî —Å–∞–º–∞—è –Ω–∏–∑–∫–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, 1 ‚Äî –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è). –†–µ–∫–æ–º–µ–Ω–¥—É—é –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç `0.5` –¥–æ `0.25`. |

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –Ω–µ –ø–æ–ª—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞—Ç—å `client`, `advertiser`, `campaign` —Å–æ —Å–ª–æ–≤–∞–º–∏ –∏–ª–∏ —Å–ª–æ–≤–æ—Ñ–æ—Ä–º–∞–º–∏ –∏–∑ —á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞. –ë—É–¥–µ—Ç –æ—à–∏–±–∫–∞ `406` —Å `"reason": "Not acceptable words - {word}"`.

–ï—Å–ª–∏ –∂–µ –≤—ã –¥–æ–±–∞–≤–∏–ª–∏ —Å–ª–æ–≤–æ –≤ —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫, –∫–æ–≥–¥–∞ —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ `campaign`, —Ç–æ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ `ads` (GET `/ads`) –∑–∞–ø—Ä–µ—Ç–Ω–æ–µ —Å–ª–æ–≤–æ –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `***`. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–æ —Å–ª–æ–≤–æ `–ø–ª–æ—Ö–æ`, —Ç–æ –∏–∑ —Ç–µ–∫—Å—Ç–∞ `–≠—Ç–æ –Ω–µ —Ö–æ—Ä–æ—à–æ, –∞ –ø–ª–æ][–æ.` –∫–ª–∏–µ–Ω—Ç —É–≤–∏–¥–∏—Ç `–≠—Ç–æ –Ω–µ —Ö–æ—Ä–æ—à–æ, –∞ ***.`

–≠—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è –º–æ–µ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É, –≤–∫–ª—é—á–∞—é—â–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –õ–µ–≤–µ–Ω—à—Ç–µ–π–Ω–∞:
```mermaid
%% –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
sequenceDiagram
    participant Client
    participant ModerateTextService
    participant Repository

    Client->>ModerateTextService: hide_abusive_content(text, is_activated)
    activate ModerateTextService
    ModerateTextService-->>Client: –ó–∞–ø—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
    alt –°–µ—Ä–≤–∏—Å –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
        ModerateTextService-->>Client: –í–æ–∑–≤—Ä–∞—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
    else –°–µ—Ä–≤–∏—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
        ModerateTextService->>Repository: get_words()
        activate Repository
        Repository-->>ModerateTextService: abusive_words
        deactivate Repository
        loop –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –≤ text
            ModerateTextService->>ModerateTextService: filter_phrase()
            ModerateTextService->>ModerateTextService: mask_abusive_words()
            loop –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞ –≤ —Å—Ç—Ä–æ–∫–µ
                ModerateTextService->>ModerateTextService: is_abusive_word()
                ModerateTextService->>ModerateTextService: levenshtein_distance()
            end
        end
        ModerateTextService-->>Client: –¢–µ–∫—Å—Ç —Å –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π
    end
    deactivate ModerateTextService
```

### ADS

–í—ã–¥–∞—á–∞ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–π —Ä–µ–∫–ª–∞–º—ã (GET `/ads`).

–í–æ—Ç –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º:
```mermaid
%% Flowchart –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
flowchart TD
    A(GET /ads) --> B[–í—ã–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å –∏–∑ Redis]
    B --> C[–ü–æ–ª—É—á–∏—Ç—å client]
    C --> D[–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ targets –∏ –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –ª–∏–º–∏—Ç–∞–º]
    D --> E[–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∫–æ–ø–∞–Ω–∏—é, –µ—Å–ª–∏ –µ—ë —É–∂–µ –ø–æ—Å–º–æ—Ç—Ä–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å]
    E --> F{–ù–µ—Ç —Ç–∞–∫–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π}
    F --> |–¥–∞| ERROR[Error 404]
    F --> |–Ω–µ—Ç| H[–ü–æ—Å—á–∏—Ç–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π profit]
    H --> P[–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å ml-score, profit]
    P --> R[–†–∞—Å—Å—á–∏—Ç–∞—Ç—å kof –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏, —Ç.–µ. –∫–æ–ª-–≤–æ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏ –∫–ª–∏–∫–æ–≤]
    R --> L[–†–∞—Å—Å—á–∏—Ç–∞—Ç—å kof —Å–∫–æ—Ä–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏–∏, —Ç.–µ. —á–µ–º –±—ã—Å—Ç—Ä–µ–µ –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è, —Ç–µ–º –±–æ–ª—å—à–µ kof]
    L --> M[–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π score]
    M --> N[–û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ score, —É–±—ã–≤–∞–Ω–∏–µ, –∏ end_date, –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ]
    N --> S[–ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é –≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –º–∞—Å—Å–∏–≤–µ]
    S --> FINISH(–í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
```

| –ù–∞—Å—Ç—Ä–æ–π–∫–∞          | –¢–∏–ø               | –û–ø–∏—Å–∞–Ω–∏–µ                                                                   |
|--------------------|-------------------|----------------------------------------------------------------------------|
| weight_profit      | float (–æ—Ç 0 –¥–æ 1) | –í–µ—Å –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏                                         |
| weight_relevance   | float (–æ—Ç 0 –¥–æ 1) | –í–µ—Å –≤–∞–∂–Ω–æ—Å—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ —Ä–µ–∫–ª–∞–º—ã                                         |
| weight_fulfillment | float (–æ—Ç 0 –¥–æ 1) | –í–µ—Å –≤–∞–∂–Ω–æ—Å—Ç–∏ –Ω–µ–Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∫–ª–∞–º—ã (–Ω–µ–¥–æ–ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏) |
| weight_time_left   | float (–æ—Ç 0 –¥–æ 1) | –í–µ—Å –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è —Ä–µ–∫–ª–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—Ö–æ–¥—è—Ç –∫ –∫–æ–Ω—Ü—É                  |

## View Tg Bot

### –ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –≤ `@ad_engine_from_prod_bot` —Å–ª–µ–¥—É–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è:

> –õ–æ–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–æ –≥–µ–æ–¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [nominatim.openstreetmap.org](https://nominatim.openstreetmap.org/)).

[–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞](./media/—Å–æ–∑–¥–∞–Ω–∏–µ%20–∫–ª–∏–µ–Ω—Ç–∞.gif)

<img src="./media/—Å–æ–∑–¥–∞–Ω–∏–µ%20–∫–ª–∏–µ–Ω—Ç–∞.gif" width="540" height="1200" alt="–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞"/>

### –í –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏—Ö —Ü–µ–ª—è—Ö –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏, –≥–¥–µ –º–æ–∂–Ω–æ –ø—Ä–æ–º–æ—Ç–∞—Ç—å –≤—Ä–µ–º—è, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞:

> –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–ø—Ä–µ—Ç–Ω—ã—Ö —Å–ª–æ–≤ –±–æ—Ç –≤—ã–¥–∞—ë—Ç —Ñ–∞–π–ª `csv`.

[–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å](./media/–∞–¥–º–∏–Ω%20–ø–∞–Ω–µ–ª—å.gif)

<img src="./media/–∞–¥–º–∏–Ω%20–ø–∞–Ω–µ–ª—å.gif" width="540" height="1200" alt="–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å"/>

### –õ—é–±–æ–π –∂–µ–ª–∞—é—â–∏–π –º–æ–∂–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏—é –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º —Ä–µ–∫–ª–∞–º—ã:

[–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è](./media/—Å–æ–∑–¥–∞–Ω–∏–µ%20—Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è.gif)

<img src="./media/—Å–æ–∑–¥–∞–Ω–∏–µ%20—Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è.gif" width="540" height="1200" alt="–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è"/>

### –£ `advertiser` –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å —Ä–µ–∫–ª–∞–º–Ω—É—é –∫–∞–º–ø–∞–Ω–∏—é:

> –ü–æ–ª—è –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —è–≤–ª—è—é—Ç—Å—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏.

> –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç—å—é.

[–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏](./media/—Å–æ–∑–¥–∞–Ω–∏–µ%20—Ä–µ–∫–ª–∞–º–Ω–æ–π%20–∫–∞–º–ø–∞–Ω–∏–∏.gif)

<img src="./media/—Å–æ–∑–¥–∞–Ω–∏–µ%20—Ä–µ–∫–ª–∞–º–Ω–æ–π%20–∫–∞–º–ø–∞–Ω–∏–∏.gif" width="256" height="512" alt="–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏"/>

### `Advertiser` –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–∏ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏, —É–≤–∏–¥–µ—Ç—å –∏—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ —É–¥–∞–ª–∏—Ç—å, –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è:

[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º–∏ –∫–∞–º–ø–∞–Ω–∏—è–º–∏](./media/—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ%20—Å–≤–æ–∏–º–∏%20–∫–∞–º–ø–∞–Ω–∏—è–º–∏.gif)

<img src="./media/—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ%20—Å–≤–æ–∏–º–∏%20–∫–∞–º–ø–∞–Ω–∏—è–º–∏.gif" width="540" height="1200" alt="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º–∏ –∫–∞–º–ø–∞–Ω–∏—è–º–∏"/>

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É:

> –ü—Ä–∏ –æ—Ç–∫–ª–∏–∫–µ –Ω–∞ —Ä–µ–∫–ª–∞–º—É –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞–¥–ø–∏—Å—å `üëçüéà–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–∫–ª–∏–∫`.

[–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã](./media/–ø—Ä–æ—Å–º–æ—Ç—Ä%20—Ä–µ–∫–ª–∞–º—ã.gif)

<img src="./media/–ø—Ä–æ—Å–º–æ—Ç—Ä%20—Ä–µ–∫–ª–∞–º—ã.gif" width="540" height="1200" alt="–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã"/>

### –ï—Å–ª–∏ —Ä–µ–∫–ª–∞–º—ã –Ω–µ—Ç:

[–†–µ–∫–ª–∞–º–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç](./media/404%20–Ω–µ—Ç%20—Ä–µ–∫–ª–∞–º—ã.gif)

<img src="./media/404%20–Ω–µ—Ç%20—Ä–µ–∫–ª–∞–º—ã.gif" width="540" height="1200" alt="–†–µ–∫–ª–∞–º–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"/>

## Schema database

![–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](/media/–°—Ö–µ–º–∞%20–±–∞–∑—ã%20–¥–∞–Ω–Ω—ã—Ö%20postgres.png)

## Telemetry

–ü—Ä–∏–º–µ—Ä –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫:

![–°–∫—Ä–∏–Ω—à–æ—Ç 1](/media/grafana%201.png)
![–°–∫—Ä–∏–Ω—à–æ—Ç 2](/media/grafana%202.png)


## Scripts

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å [project](/scripts/project.bat)?

–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ `.bat` –∏–ª–∏ `.sh`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö Docker —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ –∑–∞–ø—É—Å–∫ –∏–ª–∏ —Å–±–æ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤.

### Usage

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:

–î–ª—è Windows:
```shell
.\project.bat [options] [service]
```

–î–ª—è Unix/Linux:
```shell
./project.sh [options] [service]
```

### Options

| Option         | Short Form | Description                         |
|----------------|------------|-------------------------------------|
| --local        | -L         | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –ª–æ–∫–∞–ª—å–Ω–æ          |
| --docker       | -D         | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –≤ –¥–æ–∫–µ—Ä           |
| --run          | -R         | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å(—ã)                 |
| --build        | -B         | –°–æ–±—Ä–∞—Ç—å —Å–µ—Ä–≤–∏—Å(—ã)                   |
| --help         |            | –í—ã–≤–µ—Å—Ç–∏ help —Å–æ–æ–±—â–µ–Ω–∏–µ              |
| --tests        |            | –ó–∞–ø—É—Å—Ç–∏—Ç—å `unit` –∏ `e2e` —Ç–µ—Å—Ç—ã      |
| --tests --init |            | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑ |

### Example Usage

- Start all services locally and run them:
    - Windows:
      ```shell
      .\project.bat --local --run
      ```
    - Unix/Linux:
      ```shell
      ./equivalent.sh --local --run
      ```

- Build a specific service locally:
    - Windows:
      ```shell
      .\project.bat --local travel_service --build
      ```
    - Unix/Linux:
      ```shell
      ./equivalent.sh --local travel_service --build
      ```

- Start services using Docker:
    - Windows:
      ```shell
      .\project.bat --docker --run
      ```
    - Unix/Linux:
      ```shell
      ./equivalent.sh --docker --run
      ```

- View help information:
    - Windows:
      ```shell
      .\project.bat --help
      ```
    - Unix/Linux:
      ```shell
      ./equivalent.sh --help
      ```

- Run tests:
    - Windows:
      ```shell
      .\project.bat --tests
      ```
    - Unix/Linux:
      ```shell
      ./equivalent.sh --tests
      ```
- First run tests:
    - Windows:
      ```shell
      .\project.bat --tests --init
      ```
    - Unix/Linux:
      ```shell
      ./equivalent.sh --tests --init
      ```

### Parameter Definitions

- **mode**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –±—É–¥–µ—Ç –ª–∏ —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ Docker. –ú–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `local` –∏–ª–∏ `docker`.
- **action**: –£–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å (–º–æ–∂–µ—Ç –±—ã—Ç—å –ª–∏–±–æ `run`, –ª–∏–±–æ `build`).
- **service**: (–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è.

### Error Handling

- –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω –Ω–∏ `--local`, –Ω–∏ `--docker`, —Å–∫—Ä–∏–ø—Ç —É–≤–µ–¥–æ–º–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Ä–µ–∂–∏–º—É.
- –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –Ω–∏ `--run`, –Ω–∏ `--build`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø—Ä–æ—Å—å–±–æ–π —É–∫–∞–∑–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ.
